(function(l){typeof define=="function"&&define.amd?define(l):l()})(function(){"use strict";var us=Object.defineProperty,ls=Object.defineProperties;var fs=Object.getOwnPropertyDescriptors;var Ct=Object.getOwnPropertySymbols;var hs=Object.prototype.hasOwnProperty,ps=Object.prototype.propertyIsEnumerable;var Lt=(l,_,g)=>_ in l?us(l,_,{enumerable:!0,configurable:!0,writable:!0,value:g}):l[_]=g,E=(l,_)=>{for(var g in _||(_={}))hs.call(_,g)&&Lt(l,g,_[g]);if(Ct)for(var g of Ct(_))ps.call(_,g)&&Lt(l,g,_[g]);return l},L=(l,_)=>ls(l,fs(_));var T=(l,_,g)=>new Promise((j,V)=>{var ge=A=>{try{$(g.next(A))}catch(I){V(I)}},Y=A=>{try{$(g.throw(A))}catch(I){V(I)}},$=A=>A.done?j(A.value):Promise.resolve(A.value).then(ge,Y);$((g=g.apply(l,_)).next())});const l={VIATOR:"viator",MUSEMENT:"musement",KLOOK:"klook",CIVITATIS:"civitatis",TICKETBAR:"ticketbar",TIQETS:"tiqets",MEDIAVINE:"mediavine"},_=[/wp-admin/,/wp-login/,/preview=/,/localhost/,/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/,/file:\/\//,/content:\/\//,/getyourguide/,/gygdev\.gygtest/,/translate\.google(usercontent)?\.com/],g="https://collector.getyourguide.com",j="https://widget.getyourguide.com",V="gyg_visitor_id";function ge(t){let e=0;return _.forEach(r=>{r.test(t)&&e++}),e===0}function Y(t,e,r){const n=new RegExp("([?&])"+t+"=.*?(&|$)","i"),s=r.indexOf("?")!==-1?"&":"?";return r.match(n)?r.replace(n,"$1"+t+"="+e+"$2"):r+s+t+"="+e}function $(t){const e="deeplink_id=[\\w-]+";return t.replace(new RegExp(`${e}&|&${e}|${e}`),"")}function A(t,e){const r=document.getElementsByTagName("head")[0],n=document.createElement("script");n.async=!0,n.src=t,r.appendChild(n)}class I{}const Gt=(t,e,...r)=>{t&&console.info(`%c[PA][${e}]`,"color: orange; font-weight: bold;",...r)};class w extends I{constructor(e,r,n){super(),this.name=e,this.debug=n,this.querySelector=r}scrape(e){return Array.from(e.querySelectorAll(this.querySelector)).filter(n=>!n.getAttribute("data-gyg-scraped"))}markElements(e){e.forEach(r=>{r.setAttribute("data-gyg-scraped",Date.now().toString())})}highlightElements(e){this.debug&&e.forEach(r=>{r.style.border="10px solid #39ff14"})}start(n){return T(this,arguments,function*({document:e,payload:r}){const s=this.scrape(e);return this.markElements(s),this.highlightElements(s),this.processElements(s,r),Gt(this.debug,this.name,this.querySelector,`items found: ${s.length}`,s),r})}}var W,Nt=new Uint8Array(16);function Dt(){if(!W&&(W=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!W))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return W(Nt)}const Bt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function st(t){return typeof t=="string"&&Bt.test(t)}for(var m=[],me=0;me<256;++me)m.push((me+256).toString(16).substr(1));function ot(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(m[t[e+0]]+m[t[e+1]]+m[t[e+2]]+m[t[e+3]]+"-"+m[t[e+4]]+m[t[e+5]]+"-"+m[t[e+6]]+m[t[e+7]]+"-"+m[t[e+8]]+m[t[e+9]]+"-"+m[t[e+10]]+m[t[e+11]]+m[t[e+12]]+m[t[e+13]]+m[t[e+14]]+m[t[e+15]]).toLowerCase();if(!st(r))throw TypeError("Stringified UUID is invalid");return r}function kt(t){if(!st(t))throw TypeError("Invalid UUID");var e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}function Mt(t){t=unescape(encodeURIComponent(t));for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var jt="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Vt="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Yt(t,e,r){function n(s,o,a,u){if(typeof s=="string"&&(s=Mt(s)),typeof o=="string"&&(o=kt(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+s.length);if(c.set(o),c.set(s,o.length),c=r(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,a){u=u||0;for(var d=0;d<16;++d)a[u+d]=c[d];return a}return ot(c)}try{n.name=t}catch(s){}return n.DNS=jt,n.URL=Vt,n}function J(t,e,r){t=t||{};var n=t.random||(t.rng||Dt)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,ot(n)}function $t(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function _e(t,e){return t<<e|t>>>32-e}function Ft(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var n=unescape(encodeURIComponent(t));t=[];for(var s=0;s<n.length;++s)t.push(n.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var o=t.length/4+2,a=Math.ceil(o/16),u=new Array(a),c=0;c<a;++c){for(var d=new Uint32Array(16),i=0;i<16;++i)d[i]=t[c*64+i*4]<<24|t[c*64+i*4+1]<<16|t[c*64+i*4+2]<<8|t[c*64+i*4+3];u[c]=d}u[a-1][14]=(t.length-1)*8/Math.pow(2,32),u[a-1][14]=Math.floor(u[a-1][14]),u[a-1][15]=(t.length-1)*8&4294967295;for(var h=0;h<a;++h){for(var f=new Uint32Array(80),b=0;b<16;++b)f[b]=u[h][b];for(var S=16;S<80;++S)f[S]=_e(f[S-3]^f[S-8]^f[S-14]^f[S-16],1);for(var D=r[0],B=r[1],k=r[2],O=r[3],H=r[4],M=0;M<80;++M){var pe=Math.floor(M/20),nt=_e(D,5)+$t(pe,B,k,O)+H+e[pe]+f[M]>>>0;H=O,O=k,k=_e(B,30)>>>0,B=D,D=nt}r[0]=r[0]+D>>>0,r[1]=r[1]+B>>>0,r[2]=r[2]+k>>>0,r[3]=r[3]+O>>>0,r[4]=r[4]+H>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var z=Yt("v5",80,Ft);function X(t,e){try{e&&localStorage.setItem(t,e),window._GYG.localStorage=L(E({},window._GYG.localStorage),{[t]:e})}catch(r){window._GYG.localStorage=L(E({},window._GYG.localStorage),{[t]:e})}}function it(t){try{if(localStorage.getItem(t))return localStorage.getItem(t)}catch(e){if(window._GYG.localStorage)return window._GYG.localStorage[t]}return null}function Kt(t){try{localStorage.removeItem(t)}catch(e){window._GYG.localStorage&&delete window._GYG.localStorage[t]}}const qt="6ba7b811-9dad-11d1-80b4-00c04fd430c8",ye=t=>{try{const e=new URL(t),r=(e.hostname+e.pathname).replace(/^www\./,"").replace(/\/$/,"");return z(r,qt)}catch(e){return}},N=class N extends w{constructor(){super("GYG-Deeplinks",N.GYG_LINK_QUERY,window._GYG.debug)}getBoundingClientRect(e){const{width:r,height:n,x:s,y:o}=e.getBoundingClientRect();return{x:s!==void 0?Math.round(s):void 0,y:o!==void 0?Math.round(o):void 0,width:r!==void 0?Math.round(r):void 0,height:n!==void 0?Math.round(n):void 0}}cleanUrl(e){var n;const r=e;if(r&&r.searchParams.has("cmp")){const s=(n=r.searchParams.get("cmp"))==null?void 0:n.split("_amcid")[0];s&&r.searchParams.set("cmp",s)}return r.toString()}isDirectGYGLink(e){const r=e.getAttribute("href")||"";return/^https?:\/\/(www\.)?getyourguide/.test(r)}processElements(e,r){e.filter(this.isDirectGYGLink).filter(n=>n.closest("[data-gyg-widget]")===null).forEach(n=>{var b;const s=this.getBoundingClientRect(n),o=n.getAttribute("href")||"",a=new URL(o),u=a.searchParams.get("partner_id");let c;u?X("partner_id",u):r.header.partner_hash_code&&(a.searchParams.set("partner_id",r.header.partner_hash_code),c=r.header.partner_hash_code);const d=this.cleanUrl(a),i=z(d,N.NAMESPACE),h=ye(r.header.url),f=L(E({},s),{url:d,text:(b=n.textContent)==null?void 0:b.trim(),deeplink_id:i,page_id:h});this.attachIds(n,i,h,c),r.deeplinks=r.deeplinks||[],r.deeplinks.push(f)})}attachIds(e,r,n,s){let o=e.getAttribute("href")||"";o&&(this.isFixTrackDefined()||(o=Y("deeplink_id",r,o),n&&(o=Y("page_id",n,o)),s&&(o=Y("partner_id",s,o))),e.setAttribute("href",o.toString()))}isFixTrackDefined(){return window.hasOwnProperty("FIX")&&window.FIX.hasOwnProperty("track")}};N.GYG_LINK_QUERY='a[href*="getyourguide."]',N.NAMESPACE="6ba7b811-9dad-11d1-80b4-00c04fd430c8";let Ee=N;const Z=class Z extends w{constructor(){super("VIATOR-Deeplinks",Z.VIATOR_LINK_QUERY,window._GYG.debug)}processElements(e,r){return e.forEach(n=>{var o;const s={name:l.VIATOR,url:n.getAttribute("href"),text:(o=n.textContent)==null?void 0:o.trim()};r.competitor_deeplinks=r.competitor_deeplinks||[],r.competitor_deeplinks.push(s)}),r}};Z.VIATOR_LINK_QUERY='a[href*="www.partner.viator.com"]';let we=Z;const ee=class ee extends w{constructor(){super("TICKETBAR-Deeplinks",ee.TICKETBAR_LINK_QUERY,window._GYG.debug)}processElements(e,r){return e.forEach(n=>{var o;const s={name:l.TICKETBAR,url:n.getAttribute("href"),text:(o=n.textContent)==null?void 0:o.trim()};r.competitor_deeplinks=r.competitor_deeplinks||[],r.competitor_deeplinks.push(s)}),r}};ee.TICKETBAR_LINK_QUERY='a[href*="ticketbar.eu"]';let ve=ee;const te=class te extends w{constructor(){super("MUSEMENT-Deeplinks",te.MUSEMENT_LINK_QUERY,window._GYG.debug)}processElements(e,r){return e.forEach(n=>{var o;const s={name:l.MUSEMENT,url:n.getAttribute("href"),text:(o=n.textContent)==null?void 0:o.trim()};r.competitor_deeplinks=r.competitor_deeplinks||[],r.competitor_deeplinks.push(s)}),r}};te.MUSEMENT_LINK_QUERY='a[href*="www.musement.com"]';let be=te;const re=class re extends w{constructor(){super("CIVITATIS-Deeplinks",re.CIVITATIS_LINK_QUERY,window._GYG.debug)}processElements(e,r){e.forEach(n=>{var o;const s={name:l.CIVITATIS,url:n.getAttribute("href"),text:(o=n.textContent)==null?void 0:o.trim()};r.competitor_deeplinks=r.competitor_deeplinks||[],r.competitor_deeplinks.push(s)})}};re.CIVITATIS_LINK_QUERY='a[href*="www.civitatis.com"]';let Te=re;const ne=class ne extends w{constructor(){super("TIQETS-Deeplinks",ne.TIQETS_LINK_QUERY,window._GYG.debug)}processElements(e,r){return e.forEach(n=>{var o;const s={name:l.TIQETS,url:n.getAttribute("href"),text:(o=n.textContent)==null?void 0:o.trim()};r.competitor_deeplinks=r.competitor_deeplinks||[],r.competitor_deeplinks.push(s)}),r}};ne.TIQETS_LINK_QUERY='a[href*="www.tiqets.com"]';let Ie=ne;const se=class se extends w{constructor(){super("KLOOK-Deeplinks",se.KLOOK_LINK_QUERY,window._GYG.debug)}processElements(e,r){return e.forEach(n=>{var o;const s={name:l.KLOOK,url:n.getAttribute("href"),text:(o=n.textContent)==null?void 0:o.trim()};r.competitor_deeplinks=r.competitor_deeplinks||[],r.competitor_deeplinks.push(s)}),r}};se.KLOOK_LINK_QUERY='a[href*="www.klook.com"]';let Pe=se;const Qt=[Ee,we,ve,be,Te,Ie,Pe],Ht="0e7c8e4a-453a-4a3f-aa76-186f61d75001",Wt=t=>{const e=new URL(t),r=e.pathname.replace(/\/$/,"").split("/").pop().split(".");let n=r[0];n==="activites"&&(n="activities"),n!=="activities"&&n!=="city"&&n!=="availability"&&n!=="activities-auto"&&n!=="map"&&(n="custom");let s=r[1];s==="jpg"&&(s="jpeg");const o={p:e.searchParams.has("partner_id")?e.searchParams.get("partner_id"):e.pathname.split("/")[1],w:n,f:s,m:e.searchParams.has("cmp")?e.searchParams.get("cmp"):void 0,q:e.searchParams.has("q")?e.searchParams.get("q"):void 0,i:e.searchParams.has("iata")?e.searchParams.get("iata"):void 0,d:e.searchParams.has("location_id")?e.searchParams.get("location_id"):void 0,c:e.searchParams.has("currency")?e.searchParams.get("currency"):void 0,l:e.searchParams.has("locale_code")?e.searchParams.get("locale_code"):void 0,n:e.searchParams.has("number_of_items")?Number(e.searchParams.get("number_of_items")):void 0,t:e.searchParams.has("tour_ids")?e.searchParams.get("tour_ids"):void 0,u:e.searchParams.has("tour_id")?e.searchParams.get("tour_id"):void 0,h:e.searchParams.has("theme")?e.searchParams.get("theme"):void 0,v:e.searchParams.has("variant")?e.searchParams.get("variant"):void 0,e:e.searchParams.has("excluded_tour_ids")?e.searchParams.get("excluded_tour_ids"):void 0,a:e.searchParams.has("lat")?e.searchParams.get("lat"):void 0,o:e.searchParams.has("lon")?e.searchParams.get("lon"):void 0};return z(JSON.stringify(o),Ht)},Jt="data-gyg-widget-created",zt="data-gyg-widget-rendered",Xt="data-gyg-widget-ttfb",Zt="data-gyg-widget-fcp",at="data-gyg-widget-lcp",oe=class oe extends w{constructor(){super("GYG-Widget",oe.GYG_WIDGET_QUERY,window._GYG.debug)}extractIds(e){return e?e.split(",").map(n=>parseInt(n)).filter(n=>!Number.isNaN(n)):null}parseNumber(e){return e?parseInt(e):null}parseFloat(e){return e?parseFloat(e):null}getBoundingClientRect(e){const{width:r,height:n,x:s,y:o}=e.getBoundingClientRect();return{x:s!==void 0?Math.round(s):0,y:o!==void 0?Math.round(o):0,width:r!==void 0?Math.round(r):0,height:n!==void 0?Math.round(n):0}}getWidgetType(e){let r=e.pathname.split("/")[2].split(".")[0];return r==="activites"&&(r="activities"),r!=="activities"&&r!=="city"&&r!=="availability"&&r!=="activities-auto"&&r!=="map"&&(r="custom"),r}getWidgetFormat(e){const r=e.pathname.split("/")[2].split(".");let n="frame";return r.length>1&&(n=r[1],n==="jpg"&&(n="jpeg")),n}getWidgetRenderingTime(e){const r=e.parentElement;if(!r)return;const n=e.getAttribute(zt),s=r.getAttribute(Jt);if(!(!n||!s))return parseInt(n,10)-parseInt(s,10)}getWidgetFcp(e){const r=e.getAttribute(Zt);return r?this.parseFloat(r):null}getWidgetTtfb(e){const r=e.getAttribute(Xt);return r?this.parseFloat(r):null}getWidgetLcp(e){const r=e.getAttribute(at);return r?this.parseFloat(r):null}processElements(e,r){return e.forEach(n=>{const s=this.getBoundingClientRect(n),o=n.getAttribute("src");if(!o)return;const a=new URL(o),u=a.searchParams.get("partner_id"),c=this.parseFloat(a.searchParams.get("lat")),d=this.parseFloat(a.searchParams.get("lon")),i=L(E({},s),{type:this.getWidgetType(a),rendering_time:this.getWidgetRenderingTime(n),fcp:this.getWidgetFcp(n),ttfb:this.getWidgetTtfb(n),lcp:this.getWidgetLcp(n),widget_parameters:{campaign:a.searchParams.get("cmp"),currency:a.searchParams.get("currency"),excluded_tour_ids:this.extractIds(a.searchParams.get("excluded_tour_ids")),iata:a.searchParams.get("iata"),locale_code:a.searchParams.get("locale_code"),number_of_items:this.parseNumber(a.searchParams.get("number_of_items")),partner_hash_code:u,query:a.searchParams.get("q"),tour_ids:this.getTourIdsFromSearchParams(a.searchParams),widget_id:Wt(o),geo_location:typeof c=="number"&&typeof d=="number"?{latitude:c,longitude:d}:null,format:this.getWidgetFormat(a)}});u&&X("partner_id",u),r.widgets=r.widgets||[],r.widgets.push(i)}),r}getTourIdsFromSearchParams(e){const r=this.extractIds(e.get("tour_ids"));if(!r){const n=this.parseNumber(e.get("tour_id"));return n?[n]:null}return r}};oe.GYG_WIDGET_QUERY=`iframe[src^="https://widget.getyourguide.com"][${at}]`;let Ae=oe;const ie=class ie extends w{constructor(){super("CIVITATIS-CompetitorWidgets",ie.CIVITATIS_LINK_QUERY,window._GYG.debug)}processElements(e,r){e.forEach(n=>{const s={name:l.CIVITATIS,url:n.getAttribute("src")};r.competitor_widgets=r.competitor_widgets||[],r.competitor_widgets.push(s)})}};ie.CIVITATIS_LINK_QUERY='iframe[src*="www.civitatis.com"]';let Re=ie;const ae=class ae extends w{constructor(){super("KLOOK-CompetitorWidgets",ae.KLOOK_LINK_QUERY,window._GYG.debug)}processElements(e,r){return e.forEach(n=>{const s={name:l.KLOOK,url:n.getAttribute("src")};r.competitor_widgets=r.competitor_widgets||[],r.competitor_widgets.push(s)}),r}};ae.KLOOK_LINK_QUERY='iframe[src*="affiliate.klook.com"]';let Se=ae;const ce=class ce extends w{constructor(){super("Ticketbar-CompetitorWidgets",ce.TICKETBAR_WIDGET,window._GYG.debug)}processElements(e,r){return e.forEach(()=>{const n={name:l.TICKETBAR,url:""};r.competitor_widgets=r.competitor_widgets||[],r.competitor_widgets.push(n)}),r}};ce.TICKETBAR_WIDGET='div[class*="Ticketbar-Widget"]';let xe=ce;const de=class de extends w{constructor(){super("Tiqets-CompetitorWidgets",de.TIQETS_WIDGET,window._GYG.debug)}processElements(e,r){return e.forEach(n=>{const s={name:l.TIQETS,url:n.getAttribute("src")};r.competitor_widgets=r.competitor_widgets||[],r.competitor_widgets.push(s)}),r}};de.TIQETS_WIDGET='iframe[src*="www.tiqets.com/widgets"]';let Oe=de;const ue=class ue extends w{constructor(){super("Viator-CompetitorWidgets",ue.VIATOR_WIDGET,window._GYG.debug)}processElements(e,r){return e.forEach(n=>{const s={name:l.VIATOR,url:n.getAttribute("src")};r.competitor_widgets=r.competitor_widgets||[],r.competitor_widgets.push(s)}),r}};ue.VIATOR_WIDGET='iframe[src*="www.viator.com/orion/widget"]';let Ue=ue;const le=class le extends w{constructor(){super("Mediavine-CompetitorWidgets",le.MEDIAVINE_WIDGET,window._GYG.debug)}processElements(e,r){return e.forEach(n=>{const s=n.getAttribute("data-slotid"),o=`${document.baseURI}#slot=${s}`,a={name:l.MEDIAVINE,url:o};r.competitor_widgets=r.competitor_widgets||[],r.competitor_widgets.push(a)}),r}};le.MEDIAVINE_WIDGET='div[class*="mv-ad-box"]';let Ce=le;const er=[Ae,Re,Se,xe,Oe,Ue,Ce],tr=[...Qt,...er];class rr extends I{start(r){return T(this,arguments,function*({payload:e}){const{offsetWidth:n,scrollHeight:s}=document.body,{fontFamily:o,fontSize:a,lineHeight:u}=window.getComputedStyle(document.body),{navigationStart:c,unloadEventStart:d,unloadEventEnd:i,redirectStart:h,redirectEnd:f,fetchStart:b,domainLookupStart:S,domainLookupEnd:D,connectStart:B,connectEnd:k,secureConnectionStart:O,requestStart:H,responseStart:M,responseEnd:pe,domLoading:nt,domInteractive:ss,domContentLoadedEventStart:os,domContentLoadedEventEnd:is,domComplete:as,loadEventStart:cs,loadEventEnd:ds}=performance.timing;return e.page={width:n,height:s,page_title:document.title,page_font_family:o,page_font_size:a,page_line_height:u,performance:{navigation_start:c,unload_event_start:d,unload_event_end:i,redirect_start:h,redirect_end:f,fetch_start:b,domain_lookup_start:S,domain_lookup_end:D,connect_start:B,connect_end:k,secure_connection_start:O!=null?O:0,request_start:H,response_start:M,response_end:pe,dom_loading:nt,dom_interactive:ss,dom_content_loaded_event_start:os,dom_content_loaded_event_end:is,dom_complete:as,load_event_start:cs,load_event_end:ds}},e})}}class nr extends I{getOS(){let e="Unknown OS";return navigator.appVersion.indexOf("Win")!==-1&&(e="Windows"),navigator.appVersion.indexOf("Mac")!==-1&&(e="MacOS"),navigator.appVersion.indexOf("X11")!==-1&&(e="UNIX"),navigator.appVersion.indexOf("Linux")!==-1&&(e="Linux"),e}getPartnerHashCode(){let e=null;const r=document.querySelector('script[src*="getyourguide.com/dist/pa."]');return r&&(e=r.getAttribute("data-gyg-partner-id"),e&&X("partner_id",e)),e||(e=it("partner_id")),e==null?void 0:e.toUpperCase()}isMobileDevice(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}getPlatform(){return this.isMobileDevice()?"mweb":"desktop"}start(r){return T(this,arguments,function*({payload:e}){const{userAgent:n=null,language:s=null}=navigator,{referrer:o=null}=document,{href:a=null,origin:u=null}=window.location;return e.header={platform:this.getPlatform(),domain:u,url:a,user_agent:n,referrer_domain:o,os:this.getOS(),partner_hash_code:this.getPartnerHashCode(),accept_language:[s]},e})}}var ct=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function dt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Le=ct&&ct.__assign||function(){return Le=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Le.apply(this,arguments)};function F(t,e){if(!e)return"";var r="; "+t;return e===!0?r:r+"="+e}function sr(t){if(typeof t.expires=="number"){var e=new Date;e.setMilliseconds(e.getMilliseconds()+t.expires*864e5),t.expires=e}return F("Expires",t.expires?t.expires.toUTCString():"")+F("Domain",t.domain)+F("Path",t.path)+F("Secure",t.secure)+F("SameSite",t.sameSite)}function or(t,e,r){return encodeURIComponent(t).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(e).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+sr(r)}function ir(t){for(var e={},r=t?t.split("; "):[],n=/(%[\dA-F]{2})+/gi,s=0;s<r.length;s++){var o=r[s].split("="),a=o.slice(1).join("=");a.charAt(0)==='"'&&(a=a.slice(1,-1));try{var u=o[0].replace(n,decodeURIComponent);e[u]=a.replace(n,decodeURIComponent)}catch(c){}}return e}function ar(){return ir(document.cookie)}function cr(t){return ar()[t]}var dr=cr;function ur(t,e,r){document.cookie=or(t,e,Le({path:"/"},r))}var lr=ur,y=typeof globalThis!="undefined"&&globalThis||typeof self!="undefined"&&self||typeof y!="undefined"&&y,v={searchParams:"URLSearchParams"in y,iterable:"Symbol"in y&&"iterator"in Symbol,blob:"FileReader"in y&&"Blob"in y&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in y,arrayBuffer:"ArrayBuffer"in y};function fr(t){return t&&DataView.prototype.isPrototypeOf(t)}if(v.arrayBuffer)var hr=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],pr=ArrayBuffer.isView||function(t){return t&&hr.indexOf(Object.prototype.toString.call(t))>-1};function K(t){if(typeof t!="string"&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||t==="")throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function Ge(t){return typeof t!="string"&&(t=String(t)),t}function Ne(t){var e={next:function(){var r=t.shift();return{done:r===void 0,value:r}}};return v.iterable&&(e[Symbol.iterator]=function(){return e}),e}function p(t){this.map={},t instanceof p?t.forEach(function(e,r){this.append(r,e)},this):Array.isArray(t)?t.forEach(function(e){this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}p.prototype.append=function(t,e){t=K(t),e=Ge(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},p.prototype.delete=function(t){delete this.map[K(t)]},p.prototype.get=function(t){return t=K(t),this.has(t)?this.map[t]:null},p.prototype.has=function(t){return this.map.hasOwnProperty(K(t))},p.prototype.set=function(t,e){this.map[K(t)]=Ge(e)},p.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},p.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),Ne(t)},p.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),Ne(t)},p.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),Ne(t)},v.iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);function De(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function ut(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function gr(t){var e=new FileReader,r=ut(e);return e.readAsArrayBuffer(t),r}function mr(t){var e=new FileReader,r=ut(e);return e.readAsText(t),r}function _r(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}function lt(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function ft(){return this.bodyUsed=!1,this._initBody=function(t){this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?typeof t=="string"?this._bodyText=t:v.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:v.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:v.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():v.arrayBuffer&&v.blob&&fr(t)?(this._bodyArrayBuffer=lt(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):v.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||pr(t))?this._bodyArrayBuffer=lt(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||(typeof t=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob&&(this.blob=function(){var t=De(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=De(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(gr)}),this.text=function(){var t=De(this);if(t)return t;if(this._bodyBlob)return mr(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(_r(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(wr)}),this.json=function(){return this.text().then(JSON.parse)},this}var yr=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Er(t){var e=t.toUpperCase();return yr.indexOf(e)>-1?e:t}function U(t,e){if(!(this instanceof U))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e=e||{};var r=e.body;if(t instanceof U){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new p(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,!r&&t._bodyInit!=null&&(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",(e.headers||!this.headers)&&(this.headers=new p(e.headers)),this.method=Er(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&r)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(r),(this.method==="GET"||this.method==="HEAD")&&(e.cache==="no-store"||e.cache==="no-cache")){var n=/([?&])_=[^&]*/;if(n.test(this.url))this.url=this.url.replace(n,"$1_="+new Date().getTime());else{var s=/\?/;this.url+=(s.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}U.prototype.clone=function(){return new U(this,{body:this._bodyInit})};function wr(t){var e=new FormData;return t.trim().split("&").forEach(function(r){if(r){var n=r.split("="),s=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(s),decodeURIComponent(o))}}),e}function vr(t){var e=new p,r=t.replace(/\r?\n[\t ]+/g," ");return r.split("\r").map(function(n){return n.indexOf(`
`)===0?n.substr(1,n.length):n}).forEach(function(n){var s=n.split(":"),o=s.shift().trim();if(o){var a=s.join(":").trim();e.append(o,a)}}),e}ft.call(U.prototype);function P(t,e){if(!(this instanceof P))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e||(e={}),this.type="default",this.status=e.status===void 0?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText===void 0?"":""+e.statusText,this.headers=new p(e.headers),this.url=e.url||"",this._initBody(t)}ft.call(P.prototype),P.prototype.clone=function(){return new P(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},P.error=function(){var t=new P(null,{status:0,statusText:""});return t.type="error",t};var br=[301,302,303,307,308];P.redirect=function(t,e){if(br.indexOf(e)===-1)throw new RangeError("Invalid status code");return new P(null,{status:e,headers:{location:t}})};var C=y.DOMException;try{new C}catch(t){C=function(e,r){this.message=e,this.name=r;var n=Error(e);this.stack=n.stack},C.prototype=Object.create(Error.prototype),C.prototype.constructor=C}function ht(t,e){return new Promise(function(r,n){var s=new U(t,e);if(s.signal&&s.signal.aborted)return n(new C("Aborted","AbortError"));var o=new XMLHttpRequest;function a(){o.abort()}o.onload=function(){var c={status:o.status,statusText:o.statusText,headers:vr(o.getAllResponseHeaders()||"")};c.url="responseURL"in o?o.responseURL:c.headers.get("X-Request-URL");var d="response"in o?o.response:o.responseText;setTimeout(function(){r(new P(d,c))},0)},o.onerror=function(){setTimeout(function(){n(new TypeError("Network request failed"))},0)},o.ontimeout=function(){setTimeout(function(){n(new TypeError("Network request failed"))},0)},o.onabort=function(){setTimeout(function(){n(new C("Aborted","AbortError"))},0)};function u(c){try{return c===""&&y.location.href?y.location.href:c}catch(d){return c}}o.open(s.method,u(s.url),!0),s.credentials==="include"?o.withCredentials=!0:s.credentials==="omit"&&(o.withCredentials=!1),"responseType"in o&&(v.blob?o.responseType="blob":v.arrayBuffer&&s.headers.get("Content-Type")&&s.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(o.responseType="arraybuffer")),e&&typeof e.headers=="object"&&!(e.headers instanceof p)?Object.getOwnPropertyNames(e.headers).forEach(function(c){o.setRequestHeader(c,Ge(e.headers[c]))}):s.headers.forEach(function(c,d){o.setRequestHeader(d,c)}),s.signal&&(s.signal.addEventListener("abort",a),o.onreadystatechange=function(){o.readyState===4&&s.signal.removeEventListener("abort",a)}),o.send(typeof s._bodyInit=="undefined"?null:s._bodyInit)})}ht.polyfill=!0,y.fetch||(y.fetch=ht,y.Headers=p,y.Request=U,y.Response=P);const Tr=t=>(Object.prototype.hasOwnProperty.call(t,"GYG")||(t.GYG=t.GYG||{}),t.GYG.visitorIdPromise||(t.GYG.visitorIdPromise=fetch(`${j}/gnikcart`,{credentials:"include"}).then(e=>e.json()).catch(()=>{const e=J().replace(/-/g,"").toUpperCase().substring(0,32);t.GYG.visitorIdPromise=Promise.resolve({visitor_id:e})})),t.GYG.visitorIdPromise);class Ir extends I{getVisitorId(){return T(this,null,function*(){let e=sessionStorage.getItem(V)||"";if(!e){const{visitor_id:r}=yield Tr(window);r&&sessionStorage.setItem(V,r),e=r}return e})}getSessionId(e){return e=e||dr("session_id"),e||(e=J(),lr("session_id",e)),e}start(n){return T(this,arguments,function*({sessionId:e,payload:r}){const{language:s=null}=navigator;return r.user={visitor_id:yield this.getVisitorId(),session_id:this.getSessionId(e),locale_code:s},r})}}const fe=class fe extends I{start(r){return T(this,arguments,function*({payload:e}){return e.event_properties={uuid:J(),sent_by:fe.SENT_BY},e})}};fe.SENT_BY="PartnerAnalyzer";let Be=fe;class Pr extends I{isScriptLoadedViaWidget(e){return e.dataset.gygScriptOrigin==="widget"}getScriptOriginType(e){const r=e.some(this.isScriptLoadedViaWidget),n=!e.every(this.isScriptLoadedViaWidget);return r&&n?"BOTH":r?"WIDGET":"DIRECT"}getScripts(){const e=window._GYG.env==="production"?`${j}/dist/pa.umd.production.min.js`:"dist/pa.umd.development.js";return Array.from(document.querySelectorAll(`script[src*="${e}"]`))}start(r){return T(this,arguments,function*({payload:e}){const n=this.getScriptOriginType(this.getScripts());return e.script_origin=n,e})}}const Ar=[...[Be,Ir,nr,rr,Pr],...tr];var pt={exports:{}};(function(t){(function(){function e(d,i,h){var f;document.createEvent?(f=document.createEvent("HTMLEvents"),f.initEvent(i,!0,!0)):document.createEventObject&&(f=document.createEventObject(),f.eventType=i),f.state=h,f.eventName=i,d.dispatchEvent?d.dispatchEvent(f):d.fireEvent&&htmlEvents["on"+i]?d.fireEvent("on"+f.eventType,f):d[i]?d[i]():d["on"+i]&&d["on"+i]()}function r(d,i,h){d.addEventListener?d.addEventListener(i,h,!1):d.attachEvent&&htmlEvents["on"+i]?d.attachEvent("on"+i,h):d["on"+i]=h}function n(d,i,h){d.removeventListener?d.removeEventListener(i,h,!1):d.detachEvent&&htmlEvents["on"+i]?d.detachEvent("on"+i,h):d["on"+i]=null}function s(){return typeof window!="undefined"&&window.history&&"pushState"in window.history}if(s()){var o=window.history,a=o.pushState;o.pushState=function(d){var i=a.apply(o,arguments);return e(window,"pushstate",d),e(window,"changestate",d),i};var u=o.replaceState;o.replaceState=function(d){var i=u.apply(o,arguments);return e(window,"replacestate",d),e(window,"changestate",d),i},r(window,"popstate",function(d){e(window,"changestate",d.state)})}var c={isHistorySupported:s,addEventListener:r,removeEventListener:n,triggerEvent:e};s()&&(window.HistoryEvents=c),t.exports=c})()})(pt);var Rr=pt.exports;const Sr=dt(Rr),xr=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,Or=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Ur=/^["{[]|^-?[0-9][0-9.]{0,14}$/;function Cr(t,e){if(!(t==="__proto__"||t==="constructor"))return e}function Lr(t){if(typeof t!="string")return t;const e=t.toLowerCase();if(e==="true")return!0;if(e==="false")return!1;if(e==="null")return null;if(e==="nan")return NaN;if(e==="infinity")return 1/0;if(e!=="undefined"){if(!Ur.test(t))return t;try{return xr.test(t)||Or.test(t)?JSON.parse(t,Cr):JSON.parse(t)}catch(r){return t}}}const Gr=/#/g,Nr=/&/g,Dr=/=/g,gt=/\+/g,Br=/%5B/gi,kr=/%5D/gi,Mr=/%5E/gi,jr=/%60/gi,Vr=/%7B/gi,Yr=/%7C/gi,$r=/%7D/gi,Fr=/%20/gi;function Kr(t){return encodeURI(""+t).replace(Yr,"|").replace(Br,"[").replace(kr,"]")}function ke(t){return Kr(t).replace(gt,"%2B").replace(Fr,"+").replace(Gr,"%23").replace(Nr,"%26").replace(jr,"`").replace(Vr,"{").replace($r,"}").replace(Mr,"^")}function Me(t){return ke(t).replace(Dr,"%3D")}function mt(t=""){try{return decodeURIComponent(""+t)}catch(e){return""+t}}function qr(t){return mt(t.replace(gt," "))}function Qr(t=""){const e={};t[0]==="?"&&(t=t.substr(1));for(const r of t.split("&")){const n=r.match(/([^=]+)=?(.*)/)||[];if(n.length<2)continue;const s=mt(n[1]);if(s==="__proto__"||s==="constructor")continue;const o=qr(n[2]||"");e[s]?Array.isArray(e[s])?e[s].push(o):e[s]=[e[s],o]:e[s]=o}return e}function Hr(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(r=>`${Me(t)}=${ke(r)}`).join("&"):`${Me(t)}=${ke(e)}`:Me(t)}function Wr(t){return Object.keys(t).map(e=>Hr(e,t[e])).join("&")}const Jr=/^\w+:(\/\/)?/,zr=/^\/\/[^/]+/;function Xr(t,e=!1){return Jr.test(t)||e&&zr.test(t)}const Zr=/\/$|\/\?/;function je(t="",e=!1){return e?Zr.test(t):t.endsWith("/")}function en(t="",e=!1){if(!e)return(je(t)?t.slice(0,-1):t)||"/";if(!je(t,!0))return t||"/";const[r,...n]=t.split("?");return(r.slice(0,-1)||"/")+(n.length?`?${n.join("?")}`:"")}function tn(t="",e=!1){if(!e)return t.endsWith("/")?t:t+"/";if(je(t,!0))return t||"/";const[r,...n]=t.split("?");return r+"/"+(n.length?`?${n.join("?")}`:"")}function rn(t=""){return t.startsWith("/")}function nn(t=""){return(rn(t)?t.substr(1):t)||"/"}function sn(t,e){if(an(e))return t;const r=en(e);return t.startsWith(r)?t:dn(r,t)}function on(t,e){const r=un(t),n=E(E({},Qr(r.search)),e);return r.search=Wr(n),ln(r)}function an(t){return!t||t==="/"}function cn(t){return t&&t!=="/"}function dn(t,...e){let r=t||"";for(const n of e.filter(cn))r=r?tn(r)+nn(n):n;return r}function un(t="",e){if(!Xr(t,!0))return _t(t);const[r="",n,s=""]=(t.replace(/\\/g,"/").match(/([^:/]+:)?\/\/([^/@]+@)?(.*)/)||[]).splice(1),[o="",a=""]=(s.match(/([^/?#]*)(.*)?/)||[]).splice(1),{pathname:u,search:c,hash:d}=_t(a);return{protocol:r,auth:n?n.substr(0,n.length-1):"",host:o,pathname:u,search:c,hash:d}}function _t(t=""){const[e="",r="",n=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:r,hash:n}}function ln(t){const e=t.pathname+(t.search?(t.search.startsWith("?")?"":"?")+t.search:"")+t.hash;return t.protocol?t.protocol+"//"+(t.auth?t.auth+"@":"")+t.host+e:e}class fn extends Error{constructor(){super(...arguments),this.name="FetchError"}}function hn(t,e,r){let n="";t&&r&&(n=`${r.status} ${r.statusText} (${t.toString()})`),e&&(n=`${e.message} (${n})`);const s=new fn(n);return Object.defineProperty(s,"request",{get(){return t}}),Object.defineProperty(s,"response",{get(){return r}}),Object.defineProperty(s,"data",{get(){return r&&r._data}}),s}const pn=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function yt(t="GET"){return pn.has(t.toUpperCase())}function gn(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const mn=new Set(["image/svg","application/xml","application/xhtml","application/html"]),_n=/^application\/(?:[\w!#$%&*`\-.^~]*\+)?json(;.+)?$/i;function yn(t=""){if(!t)return"json";const e=t.split(";").shift();return _n.test(e)?"json":mn.has(e)||e.startsWith("text/")?"text":"blob"}const En=new Set([408,409,425,429,500,502,503,504]);function Et(t){const{fetch:e,Headers:r}=t;function n(a){if(a.options.retry!==!1){const c=typeof a.options.retry=="number"?a.options.retry:yt(a.options.method)?0:1,d=a.response&&a.response.status||500;if(c>0&&En.has(d))return s(a.request,L(E({},a.options),{retry:c-1}))}const u=hn(a.request,a.error,a.response);throw Error.captureStackTrace&&Error.captureStackTrace(u,s),u}const s=function(d){return T(this,arguments,function*(u,c={}){const i={request:u,options:E(E({},t.defaults),c),response:void 0,error:void 0};i.options.onRequest&&(yield i.options.onRequest(i)),typeof i.request=="string"&&(i.options.baseURL&&(i.request=sn(i.request,i.options.baseURL)),i.options.params&&(i.request=on(i.request,i.options.params)),i.options.body&&yt(i.options.method)&&gn(i.options.body)&&(i.options.body=typeof i.options.body=="string"?i.options.body:JSON.stringify(i.options.body),i.options.headers=new r(i.options.headers),i.options.headers.has("content-type")||i.options.headers.set("content-type","application/json"),i.options.headers.has("accept")||i.options.headers.set("accept","application/json"))),i.response=yield e(i.request,i.options).catch(f=>T(this,null,function*(){return i.error=f,i.options.onRequestError&&(yield i.options.onRequestError(i)),n(i)}));const h=(i.options.parseResponse?"json":i.options.responseType)||yn(i.response.headers.get("content-type")||"");if(h==="json"){const f=yield i.response.text(),b=i.options.parseResponse||Lr;i.response._data=b(f)}else i.response._data=yield i.response[h]();return i.options.onResponse&&(yield i.options.onResponse(i)),i.response.ok||i.options.onResponseError&&(yield i.options.onResponseError(i)),i.response.ok?i.response:n(i)})},o=function(u,c){return s(u,c).then(d=>d._data)};return o.raw=s,o.create=(a={})=>Et(L(E({},t),{defaults:E(E({},t.defaults),a)})),o}const wt=function(){if(typeof globalThis!="undefined")return globalThis;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("unable to locate global object")}(),wn=wt.fetch||(()=>Promise.reject(new Error("[ohmyfetch] global.fetch is not supported!"))),vn=wt.Headers,bn=Et({fetch:wn,Headers:vn});var Tn=Object.defineProperty,In=Object.defineProperties,Pn=Object.getOwnPropertyDescriptors,vt=Object.getOwnPropertySymbols,An=Object.prototype.hasOwnProperty,Rn=Object.prototype.propertyIsEnumerable,Ve=(t,e,r)=>e in t?Tn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ye=(t,e)=>{for(var r in e||(e={}))An.call(e,r)&&Ve(t,r,e[r]);if(vt)for(var r of vt(e))Rn.call(e,r)&&Ve(t,r,e[r]);return t},bt=(t,e)=>In(t,Pn(e)),Sn=(t,e,r)=>(Ve(t,e+"",r),r),xn=(t,e,r)=>new Promise((n,s)=>{var o=c=>{try{u(r.next(c))}catch(d){s(d)}},a=c=>{try{u(r.throw(c))}catch(d){s(d)}},u=c=>c.done?n(c.value):Promise.resolve(c.value).then(o,a);u((r=r.apply(t,e)).next())}),q=()=>typeof window!="undefined";const Tt="application/vnd.gyg.v2+json",On=2e3;var Un=(t,e,r)=>xn(void 0,null,function*(){if(q()&&navigator.sendBeacon){const u=new Blob([JSON.stringify(e)],{type:Tt});return navigator.sendBeacon(t,u)}const n=typeof AbortController!="undefined"?new AbortController:void 0,s=setTimeout(()=>n==null?void 0:n.abort(),On),a=yield bn(t,{method:"POST",mode:"cors",cache:"no-cache",headers:Ye({"Content-Type":Tt},r?{"x-request-id":r}:void 0),keepalive:!0,body:e,signal:n==null?void 0:n.signal});return clearTimeout(s),a});class Cn{constructor(e){Sn(this,"_config"),this._config=e}log(e,r){var n,s;return!r||!this._config?Promise.resolve():(r.producer_properties={common:this.autoPopulateCommonProperties((n=r.producer_properties)==null?void 0:n.common),web_frontend:this.autoPopulateWebFrontendProperties((s=r.producer_properties)==null?void 0:s.web_frontend)},this._config.isDebug&&console.log(`Would send this event to ${this.getEventUrl(e)}:`,r),Un(this.getEventUrl(e),r,this._config.xRequestId))}autoPopulateCommonProperties(e){var r,n;return bt(Ye({},e!=null?e:{}),{sent_by:(r=this._config.sentBy)!=null?r:"",timestamp:new Date().toISOString(),producer_id:J(),tracking_method:"collector",application_version:(n=this._config.applicationVersion)!=null?n:""})}autoPopulateWebFrontendProperties(e){var r,n,s,o,a,u,c,d,i;return bt(Ye({},e!=null?e:{}),{platform:(r=this._config.platform)!=null?r:"",user_agent:q()?navigator.userAgent:(n=this._config.userAgent)!=null?n:"",view_id:(o=(s=this._config)==null?void 0:s.viewId)!=null?o:"",container_name:(u=(a=this._config)==null?void 0:a.containerName)!=null?u:"",visitor_id:this._config.visitorId,domain:q()?window.location.host:(c=this._config.domain)!=null?c:"",url:q()?window.location.href:(d=this._config.url)!=null?d:"",referrer_url:q()?document.referrer:(i=this._config.referrerUrl)!=null?i:""})}getEventUrl(e){return`${this._config.collectorUrl}/track/${e}`}}const Ln=(t,e,r)=>{try{const n={isDebug:!1,collectorUrl:t.collector_url,sentBy:t.sent_by,applicationVersion:t.version,platform:t.platform,viewId:t.view_id,containerName:t.container_name,userAgent:t.userAgent,domain:t.domain,url:t.url,referrerUrl:t.referrer_url,visitorId:t.visitor_id};new Cn(n).log(r,e)}catch(n){console.error("AEL ERROR",n)}};class x{constructor(e,r,n=g){this.dataRepository=e,this.document=r,this.baseUrl=n}sendEvent(e){window.fetch(this.collectorUrl,{method:"POST",headers:{"Content-type":"text/plain"},body:JSON.stringify(e),keepalive:!0})}sendEventV2(e,r){var s,o,a,u,c;const n={collector_url:this.baseUrl,version:this.dataRepository.version,platform:(s=this.dataRepository.header)==null?void 0:s.platform,view_id:"",container_name:this.dataRepository.container_name,userAgent:(o=this.dataRepository.header)==null?void 0:o.user_agent,domain:this.document.domain,url:this.document.URL,referrer_url:(a=this.dataRepository.header)==null?void 0:a.referrer_url,visitor_id:(u=this.dataRepository.user)==null?void 0:u.visitor_id,sent_by:(c=this.dataRepository.event_properties)==null?void 0:c.sent_by};Ln(n,e,r)}}const Gn="PartnerAnalyzerPageRequest";class Nn extends x{constructor(){super(...arguments),this._visitorId="",this._sessionId=""}get visitorId(){return this._visitorId}set visitorId(e){this._visitorId=e}get sessionId(){return this._sessionId}set sessionId(e){this._sessionId=e}get collectorUrl(){return this.baseUrl+"/track/PartnerAnalyzerPageRequest?format=json&strict=true"}cleanupDataRepository(){delete this.dataRepository.competitor_deeplinks,delete this.dataRepository.competitor_widgets,delete this.dataRepository.deeplinks,delete this.dataRepository.widgets}collectData(e){return T(this,null,function*(){yield Promise.all(Ar.map(r=>new r().start({document:e,payload:this.dataRepository,visitorId:this.visitorId,sessionId:this.sessionId})))})}onNewPageEvent(){if(!this.dataRepository.user||!this.dataRepository.header){console.log("PA: Data hasn't been collected yet, skipping event");return}const e=this.getEventV2Payload();try{this.sendEventV2(e,Gn),this.cleanupDataRepository()}catch(r){console.error("PA ERROR",r)}}addEventListeners(){const e=n=>{window.addEventListener(n,this.onNewPageEvent.bind(this),{capture:!0})},r="onpagehide"in window?"pagehide":"unload";e(r),Sr.isHistorySupported()&&e("changestate")}addPostMessageListener(){window.addEventListener("message",e=>{const{sessionId:r=null}=e.data;this.sessionId=r},{once:!0,passive:!0,capture:!0})}start(){this.addEventListeners(),this.addPostMessageListener(),setInterval(()=>{if(this.document.readyState==="complete")try{this.collectData(document)}catch(e){}},1e3)}getEventV2Payload(){const e=this.getWidgetsV2(),r=ye(this.dataRepository.header.url);return{customer_id:this.dataRepository.user.customer_id,partner_hash_code:this.dataRepository.header.partner_hash_code,partner_id:this.dataRepository.header.partner_id,page_id:r,page:this.dataRepository.page,widgets:e,deeplinks:this.dataRepository.deeplinks,competitor_widgets:this.dataRepository.competitor_widgets,competitor_deeplinks:this.dataRepository.competitor_deeplinks,version:this.dataRepository.version,script_origin:this.dataRepository.script_origin?this.dataRepository.script_origin.toString():""}}getWidgetV2Parameters(e){const r=e.widget_parameters&&this.getGeoLocationIfPresent(e.widget_parameters.geo_location),n=e.widget_parameters&&{widget_id:e.widget_parameters.widget_id,campaign:this.getParameterIfPresent(e.widget_parameters.campaign),currency:this.getParameterIfPresent(e.widget_parameters.currency),excluded_tour_ids:this.getParameterIfPresent(e.widget_parameters.excluded_tour_ids),iata:this.getParameterIfPresent(e.widget_parameters.iata),location_id:this.getParameterIfPresent(e.widget_parameters.location_id),locale_code:this.getParameterIfPresent(e.widget_parameters.locale_code),number_of_items:this.getParameterIfPresent(e.widget_parameters.number_of_items),partner_hash_code:this.getParameterIfPresent(e.widget_parameters.partner_hash_code),query:this.getParameterIfPresent(e.widget_parameters.query),version:this.getParameterIfPresent(e.widget_parameters.version),release_version:this.getParameterIfPresent(e.widget_parameters.release_version),format:this.getParameterIfPresent(e.widget_parameters.format),tour_ids:this.getParameterIfPresent(e.widget_parameters.tour_ids)};return r&&(n.geo_location=r),n}getGeoLocationIfPresent(e){if(e&&e.latitude&&e.longitude)return{latitude:e.latitude,longitude:e.longitude}}getParameterIfPresent(e){return e||void 0}getWidgetsV2(){const e=new Array;return this.dataRepository.widgets&&this.dataRepository.widgets.forEach(r=>{const s={widget_parameters:this.getWidgetV2Parameters(r),x:r.x,y:r.y,width:r.width,height:r.height,type:r.type,rendering_time:r.rendering_time,fcp:r.fcp,ttfb:r.ttfb,lcp:r.lcp};e.push(s)}),e}}const Dn="PartnerDeeplinkClick",he=class he extends x{get collectorUrl(){return this.baseUrl+"/track/PartnerDeeplinkClick?format=json&strict=true"}getAllGYGDeeplinks(){return this.document.querySelectorAll('a[href*="getyourguide."]')}handleOnClick(e){const r=this.getEventV2Payload(e);try{this.sendEventV2(r,Dn)}catch(n){console.error("PDCE ERROR",n)}}getEventV2Payload(e){const r=this.getHREFFromEvent(e),n=ye(this.dataRepository.header.url);return{customer_id:this.dataRepository.user.customer_id,partner_hash_code:this.dataRepository.header.partner_hash_code,partner_id:this.dataRepository.header.partner_id,page_id:n,page:this.dataRepository.page,deeplink_url:r,deeplink_id:z(r,he.NAMESPACE)}}getHREFFromEvent(e){const r=e.target;return $(r.href)}trackDeeplink(e,r){e.target="_blank",e.addEventListener("click",r)}start(){this.getAllGYGDeeplinks().forEach(e=>this.trackDeeplink(e,this.handleOnClick.bind(this)))}};he.NAMESPACE="6ba7b811-9dad-11d1-80b4-00c04fd430c8";let $e=he;var Bn=function(e){return kn(e)&&!Mn(e)};function kn(t){return!!t&&typeof t=="object"}function Mn(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||Yn(t)}var jn=typeof Symbol=="function"&&Symbol.for,Vn=jn?Symbol.for("react.element"):60103;function Yn(t){return t.$$typeof===Vn}function $n(t){return Array.isArray(t)?[]:{}}function Q(t,e){return e.clone!==!1&&e.isMergeableObject(t)?G($n(t),t,e):t}function Fn(t,e,r){return t.concat(e).map(function(n){return Q(n,r)})}function Kn(t,e){if(!e.customMerge)return G;var r=e.customMerge(t);return typeof r=="function"?r:G}function qn(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return t.propertyIsEnumerable(e)}):[]}function It(t){return Object.keys(t).concat(qn(t))}function Pt(t,e){try{return e in t}catch(r){return!1}}function Qn(t,e){return Pt(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function Hn(t,e,r){var n={};return r.isMergeableObject(t)&&It(t).forEach(function(s){n[s]=Q(t[s],r)}),It(e).forEach(function(s){Qn(t,s)||(Pt(t,s)&&r.isMergeableObject(e[s])?n[s]=Kn(s,r)(t[s],e[s],r):n[s]=Q(e[s],r))}),n}function G(t,e,r){r=r||{},r.arrayMerge=r.arrayMerge||Fn,r.isMergeableObject=r.isMergeableObject||Bn,r.cloneUnlessOtherwiseSpecified=Q;var n=Array.isArray(e),s=Array.isArray(t),o=n===s;return o?n?r.arrayMerge(t,e,r):Hn(t,e,r):Q(e,r)}G.all=function(e,r){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(n,s){return G(n,s,r)},{})};var Wn=G,Jn=Wn;const zn=dt(Jn);class Fe{constructor(e,r,n=g){this.dataRepository=e,this.document=r,this.baseUrl=n}sendEvent(e,r){const n=zn(this.getUIEventBase(),r);n&&n.event_properties&&(n.event_properties.event_name=e),n&&n.metadata&&(n.metadata=JSON.stringify(n.metadata)),window.fetch(this.collectorUrl,{method:"POST",headers:{"Content-type":"text/plain"},body:JSON.stringify(n),keepalive:!0})}getUIEventBase(){return{event_properties:E({},this.dataRepository.event_properties),container_name:this.dataRepository.container_name,user:this.dataRepository.user,header:E({},this.dataRepository.header)}}}function R(t,e){window.addEventListener("message",r=>{const n=r==null?void 0:r.data;try{if(n&&n.messageType==="event_logger"){const{eventType:s}=n;if(!s||s.toLowerCase()!==t.toLowerCase())return;e(n)}}catch(s){console.error(`Failed to send ${t} with Partner Analyzer`)}})}class Xn extends Fe{constructor(){super(...arguments),this.eventType="UIClick"}get collectorUrl(){return this.baseUrl+`/track/${this.eventType}?format=json&strict=true`}sendEventCallback(e){this.sendEvent(e.eventType,e.eventData)}start(){R(this.eventType,this.sendEventCallback.bind(this))}}class Zn extends Fe{constructor(){super(...arguments),this.eventType="UIShow"}get collectorUrl(){return this.baseUrl+`/track/${this.eventType}?format=json&strict=true`}sendEventCallback(e){this.sendEvent(e.eventType,e.eventData)}start(){R(this.eventType,this.sendEventCallback.bind(this))}}class es extends Fe{constructor(){super(...arguments),this.eventType="UIEnteredDisplayPort"}get collectorUrl(){return this.baseUrl+`/track/${this.eventType}?format=json&strict=true`}sendEventCallback(e){this.sendEvent(e.eventType,e.eventData)}start(){R(this.eventType,this.sendEventCallback.bind(this))}}const At="TicketingWebUIClick",ze=class ze extends x{get collectorUrl(){return""}sendEventCallback(e){this.sendEventV2(e.eventData,At)}start(){R(At,this.sendEventCallback.bind(this))}};ze.NAMESPACE="7cde4402-cd54-4f28-a4aa-5eb96add2d88";let Ke=ze;const Rt="TicketingWebPageView",Xe=class Xe extends x{get collectorUrl(){return""}sendEventCallback(e){this.sendEventV2(e.eventData,Rt)}start(){R(Rt,this.sendEventCallback.bind(this))}};Xe.NAMESPACE="7dde5df8-7dba-4469-ba5a-a800de137523";let qe=Xe;const St="TicketingWebLinkVisible",Ze=class Ze extends x{get collectorUrl(){return""}sendEventCallback(e){this.sendEventV2(e.eventData,St)}start(){R(St,this.sendEventCallback.bind(this))}};Ze.NAMESPACE="1ac966b7-eba7-4c83-b142-e738da02bf30";let Qe=Ze;const xt="TicketingWebInitialized",et=class et extends x{get collectorUrl(){return""}sendEventCallback(e){this.sendEventV2(e.eventData,xt)}start(){R(xt,this.sendEventCallback.bind(this))}};et.NAMESPACE="cc34b8d9-1676-433b-8785-17712b04b97b";let He=et;const Ot="TicketingWebAddToCartSuccess",tt=class tt extends x{get collectorUrl(){return""}sendEventCallback(e){this.sendEventV2(e.eventData,Ot)}start(){R(Ot,this.sendEventCallback.bind(this))}};tt.NAMESPACE="c9a6bfce-16d7-452e-b463-2872065684c3";let We=tt;const Ut="TicketingWebNoAvailability",rt=class rt extends x{get collectorUrl(){return""}sendEventCallback(e){this.sendEventV2(e.eventData,Ut)}start(){R(Ut,this.sendEventCallback.bind(this))}};rt.NAMESPACE="67e16cd6-4425-4b51-b1e3-beec495401d1";let Je=rt;const ts=[Nn,$e,Xn,Zn,es,Ke,qe,Qe,He,We,Je];class rs{constructor(){this.dataRepository={container_name:"partner-analyzer",version:"ac7b1554f99fd9d3cb06c793d5471f8dc2da53da"},window._GYG=window._GYG||{};const e="pa_debug",n=new URL(window.location.href).searchParams.get(e);n==="1"?X(e,n):n==="0"&&Kt(e),window._GYG.debug=it(e)==="1",ts.forEach(s=>{new s(this.dataRepository,document).start()})}}function ns(){new rs}(function(){if(!window.gygPAStatus){if(window.gygPAStatus="loading",window._GYG=window._GYG||{},window._GYG.env="production",window._GYG.loadOnlyPA!==!0){window._GYG.env==="test"&&console.log("Loading widget script");const t=`${j}/pw/latest/client-loader/widget.js`;document.querySelector(`script[src="${t}"]`)||A(t)}ge(document.URL)&&(window.gygPAStatus="ok",ns())}})()});
